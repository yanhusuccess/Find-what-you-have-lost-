# å¤±ç‰©æ‹›é¢†ç³»ç»Ÿ - å¼€å‘è€…æŒ‡å—

## ğŸ“š ç›®å½•
1. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
2. [å¼€å‘ç¯å¢ƒæ­å»º](#å¼€å‘ç¯å¢ƒæ­å»º)
3. [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
4. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
5. [APIæ¥å£æ–‡æ¡£](#apiæ¥å£æ–‡æ¡£)
6. [å‰ç«¯å¼€å‘](#å‰ç«¯å¼€å‘)
7. [æµ‹è¯•æŒ‡å—](#æµ‹è¯•æŒ‡å—)
8. [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
project_lost/
â”‚
â”œâ”€â”€ app.py                      # ä¸»åº”ç”¨æ–‡ä»¶
â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–
â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ .gitignore                  # Gitå¿½ç•¥æ–‡ä»¶
â”‚
â”œâ”€â”€ static/                     # é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css          # è‡ªå®šä¹‰æ ·å¼
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ main.js            # JavaScriptè„šæœ¬
â”‚   â””â”€â”€ uploads/               # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”‚
â”œâ”€â”€ templates/                  # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ base.html              # åŸºç¡€æ¨¡æ¿
â”‚   â”œâ”€â”€ index.html             # é¦–é¡µ
â”‚   â”œâ”€â”€ login.html             # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ register.html          # æ³¨å†Œé¡µ
â”‚   â”œâ”€â”€ lost_*.html            # å¤±ç‰©ç›¸å…³é¡µé¢
â”‚   â”œâ”€â”€ found_*.html           # æ‹¾ç‰©ç›¸å…³é¡µé¢
â”‚   â””â”€â”€ ...                    # å…¶ä»–é¡µé¢
â”‚
â””â”€â”€ lostfound.db               # SQLiteæ•°æ®åº“ï¼ˆè¿è¡Œåç”Ÿæˆï¼‰
```

---

## ğŸ”§ å¼€å‘ç¯å¢ƒæ­å»º

### 1. å®‰è£…Pythonç¯å¢ƒ
```bash
# ç¡®è®¤Pythonç‰ˆæœ¬
python --version  # éœ€è¦3.7+
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate
```

### 3. å®‰è£…å¼€å‘ä¾èµ–
```bash
pip install -r requirements.txt

# å®‰è£…å¼€å‘å·¥å…·
pip install flask-debugtoolbar  # è°ƒè¯•å·¥å…·
pip install pylint              # ä»£ç æ£€æŸ¥
pip install black               # ä»£ç æ ¼å¼åŒ–
```

### 4. é…ç½®IDE

#### VS Codeæ¨èæ’ä»¶
- Python
- Pylance
- Jinja2
- SQLite Viewer
- GitLens

#### é…ç½®æ–‡ä»¶ï¼ˆ.vscode/settings.jsonï¼‰
```json
{
    "python.linting.pylintEnabled": true,
    "python.formatting.provider": "black",
    "editor.formatOnSave": true,
    "files.associations": {
        "*.html": "jinja-html"
    }
}
```

---

## ğŸ“ ä»£ç è§„èŒƒ

### Pythonä»£ç è§„èŒƒï¼ˆPEP 8ï¼‰

#### å‘½åè§„èŒƒ
```python
# ç±»åï¼šå¤§é©¼å³°
class UserProfile:
    pass

# å‡½æ•°åï¼šå°å†™+ä¸‹åˆ’çº¿
def get_user_info():
    pass

# å¸¸é‡ï¼šå¤§å†™+ä¸‹åˆ’çº¿
MAX_FILE_SIZE = 16 * 1024 * 1024

# å˜é‡ï¼šå°å†™+ä¸‹åˆ’çº¿
user_count = 0
```

#### å¯¼å…¥é¡ºåº
```python
# 1. æ ‡å‡†åº“
import os
import sys
from datetime import datetime

# 2. ç¬¬ä¸‰æ–¹åº“
from flask import Flask, render_template
from flask_sqlalchemy import SQLAlchemy

# 3. æœ¬åœ°æ¨¡å—
from models import User
from utils import helper
```

#### æ³¨é‡Šè§„èŒƒ
```python
def calculate_similarity(lost_item, found_item):
    """
    è®¡ç®—å¤±ç‰©å’Œæ‹¾ç‰©çš„ç›¸ä¼¼åº¦
    
    Args:
        lost_item: LostItemå¯¹è±¡
        found_item: FoundItemå¯¹è±¡
        
    Returns:
        float: ç›¸ä¼¼åº¦å¾—åˆ†ï¼ˆ0-1ä¹‹é—´ï¼‰
    """
    score = 0.0
    # ç±»åˆ«åŒ¹é…
    if lost_item.category == found_item.category:
        score += 0.3
    
    return score
```

### HTML/CSSè§„èŒƒ

#### HTML
```html
<!-- ä½¿ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾ -->
<header>
<nav>
<main>
<article>
<footer>

<!-- ç±»åä½¿ç”¨kebab-case -->
<div class="user-profile-card">
<button class="btn-primary-lg">
```

#### CSS
```css
/* BEMå‘½åè§„èŒƒ */
.block {}
.block__element {}
.block--modifier {}

/* ç¤ºä¾‹ */
.item-card {}
.item-card__title {}
.item-card--featured {}
```

### JavaScriptè§„èŒƒ
```javascript
// ä½¿ç”¨constå’Œletï¼Œé¿å…var
const API_URL = '/api/v1';
let userCount = 0;

// å‡½æ•°ä½¿ç”¨é©¼å³°å‘½å
function getUserInfo() {}

// å¼‚æ­¥å‡½æ•°ä½¿ç”¨async/await
async function fetchData() {
    try {
        const response = await fetch(API_URL);
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Error:', error);
    }
}
```

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### ERå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     User     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚
â”‚ username     â”‚
â”‚ email        â”‚
â”‚ password_hashâ”‚
â”‚ is_admin     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚            â”‚
       â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LostItem    â”‚  â”‚  FoundItem   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚  â”‚ id (PK)      â”‚
â”‚ title        â”‚  â”‚ title        â”‚
â”‚ description  â”‚  â”‚ description  â”‚
â”‚ category     â”‚  â”‚ category     â”‚
â”‚ user_id (FK) â”‚  â”‚ user_id (FK) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¡¨ç»“æ„è¯´æ˜

#### Userï¼ˆç”¨æˆ·è¡¨ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | Integer | ä¸»é”® |
| username | String(80) | ç”¨æˆ·åï¼Œå”¯ä¸€ |
| email | String(120) | é‚®ç®±ï¼Œå”¯ä¸€ |
| password_hash | String(200) | å¯†ç å“ˆå¸Œ |
| phone | String(20) | æ‰‹æœºå· |
| is_admin | Boolean | æ˜¯å¦ç®¡ç†å‘˜ |
| created_at | DateTime | åˆ›å»ºæ—¶é—´ |

#### LostItemï¼ˆå¤±ç‰©è¡¨ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | Integer | ä¸»é”® |
| title | String(200) | ç‰©å“æ ‡é¢˜ |
| description | Text | è¯¦ç»†æè¿° |
| category | String(50) | ç±»åˆ« |
| location | String(200) | ä¸¢å¤±åœ°ç‚¹ |
| lost_date | DateTime | ä¸¢å¤±æ—¥æœŸ |
| image | String(200) | å›¾ç‰‡æ–‡ä»¶å |
| status | String(20) | çŠ¶æ€ |
| reward | String(100) | é…¬è°¢ |
| user_id | Integer | å¤–é”®->User |
| views | Integer | æµè§ˆæ¬¡æ•° |
| created_at | DateTime | å‘å¸ƒæ—¶é—´ |

#### Favoriteï¼ˆæ”¶è—è¡¨ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | Integer | ä¸»é”® |
| user_id | Integer | å¤–é”®->User |
| lost_item_id | Integer | å¤–é”®->LostItemï¼ˆå¯ç©ºï¼‰ |
| found_item_id | Integer | å¤–é”®->FoundItemï¼ˆå¯ç©ºï¼‰ |
| created_at | DateTime | æ”¶è—æ—¶é—´ |

### æ•°æ®åº“æ“ä½œç¤ºä¾‹

#### åˆ›å»ºæ•°æ®
```python
# åˆ›å»ºç”¨æˆ·
user = User(username='john', email='john@example.com')
user.set_password('password123')
db.session.add(user)
db.session.commit()

# åˆ›å»ºå¤±ç‰©
item = LostItem(
    title='é»‘è‰²é’±åŒ…',
    description='å†…æœ‰èº«ä»½è¯å’Œé“¶è¡Œå¡',
    category='accessories',
    location='å›¾ä¹¦é¦†',
    lost_date=datetime.now(),
    user_id=user.id
)
db.session.add(item)
db.session.commit()
```

#### æŸ¥è¯¢æ•°æ®
```python
# æŸ¥è¯¢æ‰€æœ‰å¤±ç‰©
items = LostItem.query.all()

# æ¡ä»¶æŸ¥è¯¢
items = LostItem.query.filter_by(category='electronics').all()

# å¤æ‚æŸ¥è¯¢
items = LostItem.query.filter(
    LostItem.title.contains('æ‰‹æœº'),
    LostItem.status == 'lost'
).order_by(LostItem.created_at.desc()).all()

# åˆ†é¡µæŸ¥è¯¢
page = request.args.get('page', 1, type=int)
items = LostItem.query.paginate(page=page, per_page=12)
```

#### æ›´æ–°æ•°æ®
```python
item = LostItem.query.get(1)
item.status = 'found'
db.session.commit()
```

#### åˆ é™¤æ•°æ®
```python
item = LostItem.query.get(1)
db.session.delete(item)
db.session.commit()
```

---

## ğŸ”Œ APIæ¥å£æ–‡æ¡£

### RESTful APIè®¾è®¡

#### åŸºç¡€è·¯å¾„
```
http://localhost:5000/api/v1
```

#### è®¤è¯æ–¹å¼
```python
# ä½¿ç”¨Flask-Loginè¿›è¡Œä¼šè¯è®¤è¯
@login_required
def protected_route():
    pass
```

#### å“åº”æ ¼å¼
```json
{
    "success": true,
    "data": {},
    "message": "æ“ä½œæˆåŠŸ"
}
```

### æ¥å£åˆ—è¡¨

#### 1. æ”¶è—æ¥å£
```http
POST /lost/<id>/favorite
POST /found/<id>/favorite

Response:
{
    "favorited": true,
    "message": "æ”¶è—æˆåŠŸ"
}
```

#### 2. æœªè¯»æ¶ˆæ¯æ¥å£
```http
GET /api/unread_messages

Response:
{
    "count": 5
}
```

#### 3. æœç´¢æ¥å£
```http
GET /advanced-search?type=lost&category=electronics&keyword=æ‰‹æœº

Response: HTMLé¡µé¢
```

---

## ğŸ¨ å‰ç«¯å¼€å‘

### æ¨¡æ¿ç³»ç»Ÿï¼ˆJinja2ï¼‰

#### æ¨¡æ¿ç»§æ‰¿
```jinja2
{# base.html #}
<!DOCTYPE html>
<html>
<head>
    {% block title %}é»˜è®¤æ ‡é¢˜{% endblock %}
</head>
<body>
    {% block content %}{% endblock %}
</body>
</html>

{# index.html #}
{% extends "base.html" %}

{% block title %}é¦–é¡µ{% endblock %}

{% block content %}
<h1>æ¬¢è¿</h1>
{% endblock %}
```

#### å˜é‡å’Œè¿‡æ»¤å™¨
```jinja2
{{ user.username }}
{{ item.created_at.strftime('%Y-%m-%d') }}
{{ item.description[:100] }}...
{{ items|length }}
```

#### æ§åˆ¶ç»“æ„
```jinja2
{% if current_user.is_authenticated %}
    <p>æ¬¢è¿ï¼Œ{{ current_user.username }}</p>
{% else %}
    <p>è¯·ç™»å½•</p>
{% endif %}

{% for item in items %}
    <div>{{ item.title }}</div>
{% endfor %}
```

### JavaScriptå¼€å‘

#### AJAXè¯·æ±‚
```javascript
// æ”¶è—åŠŸèƒ½
function toggleFavorite(type, id) {
    const url = `/${type}/${id}/favorite`;
    
    fetch(url, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        console.log(data);
        updateUI(data);
    })
    .catch(error => console.error('Error:', error));
}
```

#### äº‹ä»¶å¤„ç†
```javascript
document.addEventListener('DOMContentLoaded', function() {
    // åˆå§‹åŒ–
    checkUnreadMessages();
    
    // äº‹ä»¶ç›‘å¬
    document.querySelector('#btn').addEventListener('click', handleClick);
});
```

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### å•å…ƒæµ‹è¯•

#### å®‰è£…pytest
```bash
pip install pytest pytest-flask
```

#### æµ‹è¯•æ–‡ä»¶ï¼ˆtests/test_models.pyï¼‰
```python
import pytest
from app import app, db
from models import User, LostItem

@pytest.fixture
def client():
    app.config['TESTING'] = True
    app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///:memory:'
    
    with app.test_client() as client:
        with app.app_context():
            db.create_all()
        yield client
        with app.app_context():
            db.drop_all()

def test_user_creation(client):
    user = User(username='test', email='test@example.com')
    user.set_password('password')
    db.session.add(user)
    db.session.commit()
    
    assert user.id is not None
    assert user.check_password('password') == True

def test_lost_item_creation(client):
    user = User(username='test', email='test@example.com')
    db.session.add(user)
    db.session.commit()
    
    item = LostItem(
        title='æµ‹è¯•ç‰©å“',
        description='æè¿°',
        category='other',
        location='æµ‹è¯•åœ°ç‚¹',
        user_id=user.id
    )
    db.session.add(item)
    db.session.commit()
    
    assert item.id is not None
```

#### è¿è¡Œæµ‹è¯•
```bash
pytest
pytest -v  # è¯¦ç»†è¾“å‡º
pytest --cov=app  # è¦†ç›–ç‡æŠ¥å‘Š
```

### åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•è·¯ç”±
```python
def test_index_page(client):
    response = client.get('/')
    assert response.status_code == 200
    assert b'å¤±ç‰©æ‹›é¢†ç³»ç»Ÿ' in response.data

def test_login(client):
    response = client.post('/login', data={
        'username': 'admin',
        'password': 'admin123'
    }, follow_redirects=True)
    assert response.status_code == 200
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### è´¡çŒ®æµç¨‹

1. **Forké¡¹ç›®**
2. **åˆ›å»ºåˆ†æ”¯**
   ```bash
   git checkout -b feature/new-feature
   ```
3. **æäº¤ä»£ç **
   ```bash
   git add .
   git commit -m "Add: æ–°åŠŸèƒ½æè¿°"
   ```
4. **æ¨é€åˆ†æ”¯**
   ```bash
   git push origin feature/new-feature
   ```
5. **æäº¤Pull Request**

### Commitè§„èŒƒ

```
ç±»å‹: ç®€çŸ­æè¿°

è¯¦ç»†æè¿°ï¼ˆå¯é€‰ï¼‰

å…³è”Issueï¼ˆå¯é€‰ï¼‰
```

**ç±»å‹ï¼š**
- `Add`: æ–°å¢åŠŸèƒ½
- `Fix`: ä¿®å¤bug
- `Update`: æ›´æ–°åŠŸèƒ½
- `Refactor`: é‡æ„ä»£ç 
- `Docs`: æ–‡æ¡£æ›´æ–°
- `Style`: ä»£ç æ ¼å¼è°ƒæ•´
- `Test`: æµ‹è¯•ç›¸å…³

**ç¤ºä¾‹ï¼š**
```
Add: ç”¨æˆ·æ”¶è—åŠŸèƒ½

- æ·»åŠ æ”¶è—æ•°æ®æ¨¡å‹
- å®ç°æ”¶è—/å–æ¶ˆæ”¶è—API
- åˆ›å»ºæ”¶è—åˆ—è¡¨é¡µé¢

Closes #123
```

### ä»£ç å®¡æŸ¥æ¸…å•

- [ ] ä»£ç ç¬¦åˆPEP 8è§„èŒƒ
- [ ] æ·»åŠ äº†å¿…è¦çš„æ³¨é‡Š
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æ·»åŠ äº†å•å…ƒæµ‹è¯•
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ²¡æœ‰å¼•å…¥æ–°çš„å®‰å…¨é—®é¢˜
- [ ] æ€§èƒ½æ²¡æœ‰æ˜æ˜¾ä¸‹é™

---

## ğŸ” è°ƒè¯•æŠ€å·§

### Flaskè°ƒè¯•æ¨¡å¼
```python
app.run(debug=True)
```

### ä½¿ç”¨Flask-DebugToolbar
```python
from flask_debugtoolbar import DebugToolbarExtension

app.config['DEBUG_TB_ENABLED'] = True
toolbar = DebugToolbarExtension(app)
```

### æ—¥å¿—è°ƒè¯•
```python
app.logger.debug('è°ƒè¯•ä¿¡æ¯')
app.logger.info('ä¸€èˆ¬ä¿¡æ¯')
app.logger.warning('è­¦å‘Šä¿¡æ¯')
app.logger.error('é”™è¯¯ä¿¡æ¯')
```

### Pythonè°ƒè¯•å™¨
```python
import pdb; pdb.set_trace()  # è®¾ç½®æ–­ç‚¹
```

---

## ğŸ“š å­¦ä¹ èµ„æº

### Flaskç›¸å…³
- [Flaskå®˜æ–¹æ–‡æ¡£](https://flask.palletsprojects.com/)
- [Flask Mega-Tutorial](https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world)
- [Flask-SQLAlchemyæ–‡æ¡£](https://flask-sqlalchemy.palletsprojects.com/)

### å‰ç«¯ç›¸å…³
- [Bootstrapæ–‡æ¡£](https://getbootstrap.com/docs/)
- [JavaScript MDN](https://developer.mozilla.org/)
- [Chart.jsæ–‡æ¡£](https://www.chartjs.org/)

### Pythonç›¸å…³
- [Pythonå®˜æ–¹æ–‡æ¡£](https://docs.python.org/3/)
- [Real Python](https://realpython.com/)
- [Python Cookbook](https://python3-cookbook.readthedocs.io/)

---

## ğŸ’¬ ç¤¾åŒº

- **GitHub Discussions**: è®¨è®ºæ–°æƒ³æ³•
- **Issue Tracker**: æŠ¥å‘Šbugå’Œæäº¤åŠŸèƒ½è¯·æ±‚
- **å¼€å‘è€…ç¾¤**: [åŠ å…¥ç¾¤èŠ]

---

**Happy Coding! ğŸš€**

